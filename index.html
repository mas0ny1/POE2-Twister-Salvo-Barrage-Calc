<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Twister Simulator</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="app">
      <aside id="controls">
        <h2>Twister Simulator</h2>
        <section class="card">
          <h3>Simulation</h3>
          <div class="field-group">
            <label for="arenaType">Arena Layout</label>
            <select id="arenaType">
              <option value="circle">Circle Arena</option>
              <option value="square">Square Arena</option>
              <option value="tjunction">T-Junction</option>
            </select>
          </div>
          <div class="buttons">
            <button id="startBtn" class="btn-start">Start</button>
            <button id="stopBtn" class="btn-stop">Stop</button>
            <button id="resetBtn" class="btn-reset">Reset</button>
          </div>
        </section>

        <section class="card" id="skillBehaviourSection">
          <h3 class="collapsible-header" id="skillBehaviourToggle">
            <span class="toggle-arrow">â–¼</span>
            Skill Behaviour
          </h3>
          <div class="collapsible-content" id="skillBehaviourContent">
            <div class="field-group">
              <label for="projectileCount">Base Projectiles</label>
              <input id="projectileCount" type="number" value="1" min="1" step="1" />
            </div>

            <div class="field-group">
              <label for="whirlwindStages">Whirlwind Stages</label>
              <input id="whirlwindStages" type="number" value="3" min="0" step="1" />
            </div>

            <div class="field-group">
              <label for="baseProjSpeed">Base Projectile Speed (u/s)</label>
              <input id="baseProjSpeed" type="number" value="75" min="1" step="1" />
            </div>

            <div class="field-group">
              <label for="twisterRadius">Twister Radius (units)</label>
              <input id="twisterRadius" type="number" value="0.5" min="0.1" step="0.1" />
            </div>

            <div class="field-group">
              <label for="duration">Duration (s)</label>
              <input id="duration" type="number" value="3" min="0" step="0.1" />
            </div>

            <div class="field-group">
              <label for="baseSealGainFrequency">Base Seal Gain Frequency (/s)</label>
              <input id="baseSealGainFrequency" type="number" value="0.5" min="0.01" step="0.01" />
            </div>

            <div class="field-group">
              <label for="timeBetweenBarrageRepeats">Time Between Barrage Repeats (s)</label>
              <input id="timeBetweenBarrageRepeats" type="number" value="0.18" min="0.01" step="0.01" />
            </div>

            <div class="field-group">
              <label for="barrageTimeInterval">Total Time for all Barrages (s)</label>
              <input id="barrageTimeInterval" type="number" value="0" min="0" step="0.1" />
            </div>
          </div>
        </section>

        <section class="card">
          <h3>Character Stats</h3>
          <div class="field-group">
            <label for="avgHit">Average Hit</label>
            <input id="avgHit" type="number" value="1000" min="0" step="1" />
          </div>

          <div class="field-group">
            <label for="projSpeedMod">Increased Projectile Speed (%)</label>
            <input id="projSpeedMod" type="number" value="0" min="0" step="1" />
          </div>

          <div class="field-group">
            <label for="increasedSealGainFrequency">Increased Seal Gain Frequency (%)</label>
            <input id="increasedSealGainFrequency" type="number" value="0" min="0" step="1" />
          </div>

          <div class="field-group">
            <label for="maxSeals">Max Seals</label>
            <input id="maxSeals" type="number" value="3" min="1" step="1" />
          </div>

          <div class="field-group">
            <label>Current Seals</label>
            <div id="currentSealsDisplay" style="font-size: 1.2em; font-weight: bold; color: #7cc5ff;">0 / 3</div>
          </div>
        </section>

        <section class="card">
          <h3>Character Behaviour</h3>
          <div class="field-group">
            <label for="salvoSealCount">How many seals do you wait for</label>
            <input id="salvoSealCount" type="number" value="3" min="0" step="1" />
          </div>
          <div class="field-group">
            <label for="barrageCount">Barrage Count</label>
            <input id="barrageCount" type="number" value="0" min="0" step="1" />
          </div>
        </section>

        <section class="card">
          <h3>Enemy</h3>
          <div class="field-group">
            <label for="bossRadius">Enemy Radius (units)</label>
            <input id="bossRadius" type="number" value="3" min="0.1" step="0.1" />
          </div>
        </section>

        

        

        <section class="card">
          <h3>Charts</h3>
          <div class="field-group">
            <label for="timeScale">Chart Timescale</label>
            <select id="timeScale">
              <option value="5">5s</option>
              <option value="10" selected>10s</option>
              <option value="30">30s</option>
              <option value="60">60s</option>
              <option value="120">120s</option>
            </select>
          </div>
          <div class="stats">
            <div class="stat"><span>Hits (total):</span><strong id="hitsTotal">0</strong><canvas id="sparkHits" class="twister" width="160" height="28"></canvas></div>
            <div class="stat"><span>Hit Rate (/s):</span><strong id="hitsPerSec">0</strong><canvas id="sparkRate" class="twister" width="160" height="28"></canvas></div>
            <div class="stat"><span>DPS:</span><strong id="dps">0</strong><canvas id="sparkDps" class="twister" width="160" height="28"></canvas></div>
            <div class="stat"><span>Total Damage:</span><strong id="totalDmg">0</strong><canvas id="sparkDmg" class="twister" width="160" height="28"></canvas></div>
            <div class="stat"><span>Projectiles:</span><strong id="projAlive">0</strong><canvas id="sparkAlive" class="twister" width="160" height="28"></canvas></div>
            <div class="stat"><span>Expected Total Projectiles:</span><strong id="expectedTotalProj">0</strong></div>
            <div class="stat"><span>Hits per Full Cast (last 5):</span><div id="hitsPerCast" style="font-size: 0.9em; color: #7cc5ff; font-weight: bold;">-</div></div>
            <div class="stat"><span>Projectiles per Full Cast (last 5):</span><div id="projPerCast" style="font-size: 0.9em; color: #7cc5ff; font-weight: bold;">-</div></div>
            <div class="stat"><span>Percentage of Total Projectiles hit Per Cast (last 5):</span><div id="percentHitPerCast" style="font-size: 0.9em; color: #7cc5ff; font-weight: bold;">-</div></div>
            <div class="stat"><span>Avg Hits (last 10 casts):</span><strong id="avgHitsPerCast">0</strong></div>
          </div>
        </section>

        
      </aside>

      <main id="stage">
        <canvas id="canvas" width="1200" height="800"></canvas>
        <div id="overlay">Drag the caster and boss. Use controls to configure.</div>
        <div id="distanceDisplay" style="position: absolute; bottom: 20px; right: 20px; background: rgba(0, 0, 0, 0.7); color: #7cc5ff; padding: 10px 15px; border-radius: 5px; font-family: monospace; font-size: 14px; border: 1px solid #7cc5ff;">
          <div>Distance:</div>
          <div id="distanceValue">0 U</div>
          <div id="distanceMeters" style="font-size: 12px; color: #aaa;">0.0 m</div>
        </div>
      </main>
    </div>

    <script src="./main.js"></script>
  </body>
  </html>


